/* File:      builtin.P
** Author(s): Debray, Sagonas, Swift, Warren, Xu
** Contact:   xsb-contact@cs.sunysb.edu
** 
** Copyright (C) The Research Foundation of SUNY, 1986, 1993-1998
** Copyright (C) ECRC, Germany, 1990
** 
** XSB is free software; you can redistribute it and/or modify it under the
** terms of the GNU Library General Public License as published by the Free
** Software Foundation; either version 2 of the License, or (at your option)
** any later version.
** 
** XSB is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
** FOR A PARTICULAR PURPOSE.  See the GNU Library General Public License for
** more details.
** 
** You should have received a copy of the GNU Library General Public License
** along with XSB; if not, write to the Free Software Foundation,
** Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
**
** $Id$
** 
*/



/*======================================================================*/
/* inline predicates							*/
/*======================================================================*/

inline_predicate('=', 2).
inline_predicate('<', 2).
inline_predicate('>', 2).
inline_predicate('=<', 2).
inline_predicate('>=', 2).
inline_predicate('=:=', 2).
inline_predicate('=\=', 2).
inline_predicate(is, 2).
inline_predicate('==', 2).
inline_predicate('\==', 2).
inline_predicate('@<', 2).
inline_predicate('@=<', 2).
inline_predicate('@>', 2).
inline_predicate('@>=', 2).

inline_predicate(var, 1).
inline_predicate(nonvar, 1).
inline_predicate('_$cutto', 1).
inline_predicate('_$savecp', 1).
inline_predicate('_$builtin', 1).

inline_predicate(fail, 0).
inline_predicate(true, 0).
inline_predicate(halt, 0).
inline_predicate('!', 0).

/*======================================================================*/
/* primitive predicates	("hard-wired" builtins)				*/
/*======================================================================*/

inline_builtin(psc_name, 2, 1).
inline_builtin(psc_arity, 2, 2).
inline_builtin(psc_type, 2, 3).
inline_builtin(psc_prop, 2, 4).
inline_builtin(psc_set_type, 2, 5).
inline_builtin(psc_set_prop, 2, 6).

inline_builtin(term_psc, 2, 11).
inline_builtin(term_type, 2, 12).
inline_builtin(term_compare, 3, 13).
inline_builtin(term_new, 2, 14).
inline_builtin(term_arg, 3, 15).
inline_builtin(term_set_arg, 4, 16).
inline_builtin(stat_flag, 2,  17).
inline_builtin(stat_set_flag, 2, 18).
inline_builtin(buff_alloc, 2, 19).
inline_builtin(buff_word, 3, 20).
inline_builtin(buff_set_word, 3, 21).
inline_builtin(buff_byte, 3, 22).
inline_builtin(buff_set_byte, 3, 23).
inline_builtin(code_call, 3, 24).
inline_builtin(str_len, 2, 25).

inline_builtin(str_cat, 3, 27).
inline_builtin(str_cmp, 3, 28).
inline_builtin(str_hsh, 4, 29).
inline_builtin(call0, 1, 31).
inline_builtin(stat_sta, 1, 32).
inline_builtin(stat_cputime, 1, 33).
inline_builtin(code_load, 3, 34).
inline_builtin(buff_set_var, 4, 35).
inline_builtin(buff_dealloc, 3, 36).
inline_builtin(buff_cell, 3, 37).
inline_builtin(buff_set_cell, 4, 38).
inline_builtin(buff_copyterm, 6, 39).
inline_builtin(str_sub, 3, 40).
inline_builtin(dirname_canonic, 2, 41).
inline_builtin(psc_insert, 4, 42).
inline_builtin(psc_import, 3, 43).

inline_builtin(psc_insertmod, 3, 46).
inline_builtin(load_seg, 5, 47).
inline_builtin(file_gettoken, 5, 48).
inline_builtin(file_puttoken, 3, 49).
inline_builtin(term_hash, 3, 50).
inline_builtin(unload_seg, 1, 51).
inline_builtin(load_obj, 4, 52).

inline_builtin(getenv, 2, 54).
/* inline_builtin(sys_syscall, 4, 55). */
inline_builtin(sys_system, 4, 56).
inline_builtin(sys_gethost, 2, 57).
inline_builtin(sys_errno, 1, 58).

inline_builtin(file_stat, 3, 60).
inline_builtin(file_writequoted, 2, 61).
inline_builtin(fast_ground, 1, 62).

inline_builtin(intern_string, 2, 65).
inline_builtin(expand_filename, 2, 66).
inline_builtin(tilde_expand_filename, 2, 67).
inline_builtin(is_absolute_filename, 1, 68).
inline_builtin(parse_filename, 4, 69).

inline_builtin(psc_env, 2, 100).
inline_builtin(psc_spy, 2, 101).
inline_builtin(psc_tabled, 2, 102).

% inline_builtin(is_incomplete, 4, 104). % Should not be inlined -- Kostis !!
% inline_builtin(get_osp_breg, 2, 105). % Not really used at this point
% inline_builtin(cut_if_leader, 3, 106). % Not really used at this point
inline_builtin(get_ptcp, 1, 107).
inline_builtin(get_subgoal_ptr, 2, 108).
inline_builtin(dereference_the_bucket, 2, 109).
inline_builtin(pair_psc, 2, 110).
inline_builtin(pair_next, 2, 111).
inline_builtin(next_bucket, 2, 112).

inline_builtin(slg_not, 1, 114).

inline_builtin(is_xwammode, 1, 117).
inline_builtin(close_open_tables, 0, 118).

inline_builtin(file_function, 7, 123).
inline_builtin(slash, 1, 124).

inline_builtin(abolish_table_info, 0, 126).

inline_builtin(formatted_io, 5, 142).
inline_builtin(table_status, 2, 143).
inline_builtin(get_delay_lists, 2, 144).

inline_builtin(abolish_table_predicate, 1, 146).

inline_builtin(trie_delete_branch_ret, 3, 149).
% inline_builtin(get_returns,2,150). % Cannot be inlined - compiler bug ?
% inline_builtin(get_calls,1,151). % Cannot be inlined - compiler bug ?
inline_builtin(get_lastnode_cs_retskel, 3, 152).
inline_builtin(construct_ret_for_call, 1, 153).
% inline_builtin(breg_retskel, 4, 154).

% The following two are not declared as inlined, because they are inlined
% in a special way (through WAM instructions) by the XSB compiler anyway.
% inline_builtin(var, 1, 190).
% inline_builtin(nonvar, 1, 191).
inline_builtin(atom, 1, 192).
inline_builtin(integer, 1, 193).
inline_builtin(real, 1, 194).
inline_builtin(number, 1, 195).
inline_builtin(atomic, 1, 196).
inline_builtin(compound, 1, 197).
inline_builtin(callable, 1, 198).
inline_builtin(is_list, 1, 199).
inline_builtin(functor, 3, 200).
inline_builtin(arg, 3, 201).
inline_builtin(=.., 2, 202).

inline_builtin(hilog_arg, 3, 204).
% inline_builtin(hilog_univ, 2, 205).

inline_builtin(atom_codes, 2, 207).
inline_builtin(atom_chars, 2, 208).
inline_builtin(number_chars, 2, 209).
inline_builtin(put, 1, 210).
inline_builtin(tab, 1, 211).
inline_builtin(number_codes, 2, 212).
inline_builtin(is_charlist, 2, 213).

inline_builtin(sort, 2, 220).
inline_builtin(keysort, 2, 221).

inline_builtin(print_chat, 0, 239).
inline_builtin(print_ls, 0, 240).
inline_builtin(print_tr, 0, 241).
inline_builtin(print_heap, 2, 242).
inline_builtin(print_cp, 0, 243).
inline_builtin(print_regs, 0, 244).
inline_builtin(print_all_stacks, 0, 245).
inline_builtin(expand_heap, 0, 246).
inline_builtin(mark_heap, 1, 247).
inline_builtin(gc_heap, 0, 248).
inline_builtin('$$findall_init', 2, 249).
inline_builtin('$$findall_add', 3, 250).
inline_builtin('$$findall_get_solutions', 4, 251).

inline_builtin(force_truth_value, 2, 254).

/*======================================================================*/
/* builtin functions							*/
/*======================================================================*/

builtin_function('+', 2, 1).
builtin_function('-', 2, 2).
builtin_function('*', 2, 3).
builtin_function('/', 2, 4).
builtin_function('/\', 2, 5).
builtin_function('\/', 2, 6).
builtin_function('//', 2, 7).
builtin_function(sin, 1, 9).
builtin_function(cos, 1, 10).
builtin_function(tan, 1, 11).
builtin_function(float, 1, 13).
builtin_function(floor, 1, 14).
builtin_function(exp, 1, 15).
builtin_function(log, 1, 16).
builtin_function(log10, 1, 17).
builtin_function(sqrt, 1, 18).
builtin_function(asin, 1, 19).
builtin_function(acos, 1, 20).
builtin_function(atan, 1, 21).

